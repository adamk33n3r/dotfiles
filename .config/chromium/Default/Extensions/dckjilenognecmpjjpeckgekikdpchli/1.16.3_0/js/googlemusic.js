if(console.log(">>sc-goog"),"undefined"==typeof runninggooglemusic){var runninggooglemusic=!0,exports={};!function(){var e={},t={},n=2;chrome.storage.local.get(null,function(t){e=t,0==--n&&f()}),chrome.storage.sync.get(null,function(e){if(t=e,!t.test)for(var a in console)console[a]=function(){};0==--n&&f()});var a=function(n,a){if("local"==a)for(var o in n)e[o]=n[o].newValue;else if("sync"==a)for(var o in n)t[o]=n[o].newValue};chrome.storage.onChanged.addListener(a);var o=function(e){if(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t);var t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t);var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}},r=function(){for(var e=document.querySelectorAll("#playlists [data-type=pl] .fade-out"),t=["Thumbs up","Last added"],n=0;n<e.length;n++)t.push(e[n].innerText);return t};window.MutationObserver=window.MutationObserver||window.WebkitMutationObserver;var l={},u=null,i=null,s=null,c=null,d=null,y={},v=!1,p=function(){if(!c){u=!!document.querySelector("button[data-id=play-pause][title=Pause]");var e=document.querySelector("#playerSongTitle");e=e?e.innerText:"";var t=document.querySelector(".player-artist");t=t?t.innerText:"";var n=document.querySelector(".player-album");n=n?n.innerText:"";var a=document.querySelector("#playingAlbumArt");a=a?a.src.replace("s130","s250"):"",i=document.querySelector('#player li[data-rating="5"].selected')?1:document.querySelector('#player li[data-rating="1"].selected')?-1:0,s=(parseFloat(document.querySelector("#vslider .goog-slider-thumb").style.left)-0)/88;var d=document.querySelector("#playlists [data-type=pl].selected .fade-out, [data-id=auto-playlist-thumbs-up].selected .fade-out, [data-id=auto-playlist-recent].selected .fade-out");d=d?d.innerText:"",c=chrome.extension.connect({name:JSON.stringify({name:"playerport",type:"googlemusic",isplaying:u,song:e,artist:t,album:n,albumart:a,songvote:i,volume:s,playlists:r(),playlist:d})}),c.onMessage.addListener(b),c.onDisconnect.addListener(m),l={},l.playpause=new MutationObserver(function(){var e=!!document.querySelector("button[data-id=play-pause][title=Pause]");e!=u&&(v&&e&&o(document.querySelector("button[data-id=play-pause][title=Pause]")),u=e,c.postMessage({isplaying:u}))}),l.playpause.observe(document.querySelector("button[data-id=play-pause]"),{attributes:!0,attributeFilter:["title"]}),l.volume=new MutationObserver(function(){var e=(parseFloat(document.querySelector("#vslider .goog-slider-thumb").style.left)-0)/88;e!=s&&c.postMessage({volume:e}),s=e}),l.volume.observe(document.querySelector("#vslider .goog-slider-thumb"),{attributes:!0,attributeFilter:["style"]}),l.songinfo=new MutationObserver(function(){var e=document.querySelector("#playerSongTitle").innerText,t=document.querySelector(".player-artist").innerText,n=document.querySelector(".player-album").innerText,a=document.querySelector("#playingAlbumArt")?document.querySelector("#playingAlbumArt").src.replace("s130","s250"):"";console.log({song:e,artist:t,album:n,albumart:a}),c.postMessage({song:e,artist:t,album:n,albumart:a})}),l.songinfo.observe(document.querySelector("#playerSongInfo"),{subtree:!0,childList:!0}),l.playlist=new MutationObserver(function(){var e=document.querySelector("#playlists [data-type=pl].selected .fade-out, [data-id=auto-playlist-thumbs-up].selected .fade-out, [data-id=auto-playlist-recent].selected .fade-out");e=e?e.innerText:"",c.postMessage({playlists:r(),playlist:e})}),l.playlist.observe(document.querySelector("#auto-playlists"),{subtree:!0,attributes:!0,attributeFilter:["class"]}),l.playlist.observe(document.querySelector("#playlists"),{subtree:!0,attributes:!0,attributeFilter:["class"]}),l.elapsed=new MutationObserver(function(){var e=document.querySelector("#slider");e&&(y.elapsed=e.getAttribute("aria-valuenow")/1e3,y.duration=e.getAttribute("aria-valuemax")/1e3),c.postMessage({elapsedTime:y.elapsed,totalTime:y.duration})}),l.elapsed.observe(document.querySelector(".goog-slider-thumb"),{attributes:!0,attributeFilter:["style"]}),l.songvote=new MutationObserver(function(){var e=document.querySelector('#player li[data-rating="5"].selected')?1:document.querySelector('#player li[data-rating="1"].selected')?-1:0;e!=i&&c.postMessage({songvote:e}),i=e}),l.songvote.observe(document.querySelector("#player li[data-rating='5']"),{attributes:!0,attributeFilter:["class"]}),l.songvote.observe(document.querySelector("#player li[data-rating='1']"),{attributes:!0,attributeFilter:["class"]})}},m=function(){c&&c.disconnect(),c=null,runninggooglemusic=void 0;for(var e in l)l[e].disconnect();chrome.storage.onChanged.removeListener(a)},b=function(e){e.pong&&(d=!0);var t=document.querySelector("#player");if(t&&"none"!=t.style.display){if("play"==e.action){v=!1,o(document.querySelector("button[data-id=play-pause][title=Play]"));var n=y.elapsed;setTimeout(function(){n==y.elapsed&&o(document.querySelector("button[data-id=play-pause][title=Play]"))},2e3)}if("initpause"==e.action){v=!0,o(document.querySelector("button[data-id=play-pause][title=Pause]"));var a=10,r=setInterval(function(){!v||a--<=0?clearInterval(r):o(document.querySelector("button[data-id=play-pause][title=Pause]"))},100),l=function(){v=!1,document.querySelector("button[data-id=play-pause]").removeEventListener("click",l,!0),document.querySelector("button[data-id=forward]").removeEventListener("click",l,!0),document.querySelector("button[data-id=rewind]").removeEventListener("click",l,!0)};document.querySelector("button[data-id=play-pause]").addEventListener("click",l,!0),document.querySelector("button[data-id=forward]").addEventListener("click",l,!0),document.querySelector("button[data-id=rewind]").addEventListener("click",l,!0)}if("pause"==e.action&&o(document.querySelector("button[data-id=play-pause][title=Pause]")),"prev"==e.action&&o(document.querySelector("button[data-id=rewind]")),"next"==e.action&&o(document.querySelector("button[data-id=forward]")),"thumbup"==e.action&&o(document.querySelector('#player li[data-rating="5"]')),"thumbdown"==e.action&&o(document.querySelector('#player li[data-rating="1"]')),"seek"==e.action){var u=document.querySelector("#slider"),i=u.style.display;u.style.display="block";var s=0,c=u;do s+=c.offsetLeft;while(c=c.offsetParent);s+=0+Math.round(u.offsetWidth*e.seek);var p=document.createEvent("MouseEvents");p.initMouseEvent("mousedown",!0,!0,window,1,0,0,s,0,!1,!1,!1,!1,0,null),u.dispatchEvent(p);var p=document.createEvent("MouseEvents");p.initMouseEvent("mouseup",!0,!0,window,1,0,0,s,0,!1,!1,!1,!1,0,null),u.dispatchEvent(p);var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,1,0,0,s,0,!1,!1,!1,!1,0,null),u.dispatchEvent(p),u.style.display=i}if("setvolume"==e.action){var u=document.querySelector("#vslider"),i=u.style.display;u.style.display="block";var s=0,c=u;do s+=c.offsetLeft;while(c=c.offsetParent);s+=6+Math.round(88*e.volume);var p=document.createEvent("MouseEvents");p.initMouseEvent("mousedown",!0,!0,window,1,0,0,s,0,!1,!1,!1,!1,0,null),u.dispatchEvent(p);var p=document.createEvent("MouseEvents");p.initMouseEvent("mouseup",!0,!0,window,1,0,0,s,0,!1,!1,!1,!1,0,null),u.dispatchEvent(p);var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,1,0,0,s,0,!1,!1,!1,!1,0,null),u.dispatchEvent(p),u.style.display=i}if("setplaylist"==e.action)if("Thumbs up"==e.playlist){var u=document.querySelector("[data-id=auto-playlist-thumbs-up]");o(u);var p=document.createEvent("MouseEvents");p.initMouseEvent("dblclick",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),u.dispatchEvent(p)}else if("Last added"==e.playlist){var u=document.querySelector("[data-id=auto-playlist-recent]");o(u);var p=document.createEvent("MouseEvents");p.initMouseEvent("dblclick",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),u.dispatchEvent(p)}else for(var m=document.querySelectorAll("#playlists [data-type=pl] .fade-out"),b=0;b<m.length;b++)if(e.playlist==m[b].innerText){o(m[b]);var p=document.createEvent("MouseEvents");p.initMouseEvent("dblclick",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),m[b].dispatchEvent(p)}}},f=function(){var e=function(){return!document.querySelector("button[data-id=play-pause]")||document.querySelector("button[data-id=play-pause][disabled]")?setTimeout(e,500):void p()};e()}}()}