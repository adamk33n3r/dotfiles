if("undefined"==typeof runningradio){var runningradio=!0,exports={};!function(){var e={},t={},n=2;chrome.storage.local.get(null,function(t){e=t,0==--n&&b()}),chrome.storage.sync.get(null,function(e){if(t=e,!t.test)for(var o in console)console[o]=function(){};0==--n&&b()});var o=function(n,o){if("local"==o)for(var a in n)e[a]=n[a].newValue;else if("sync"==o)for(var a in n)t[a]=n[a].newValue};chrome.storage.onChanged.addListener(o);var a=function(e,t,n){if(e){t=t||0,n=n||0;var o=document.createEvent("MouseEvents");o.initMouseEvent("mousedown",!0,!0,window,1,0,0,t,n,!1,!1,!1,!1,0,null),e.dispatchEvent(o),o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!0,window,1,0,0,t,n,!1,!1,!1,!1,0,null),e.dispatchEvent(o),o=document.createEvent("MouseEvents"),o.initMouseEvent("mouseup",!0,!0,window,1,0,0,t,n,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}};window.MutationObserver=window.MutationObserver||window.WebkitMutationObserver;var i={},r=null,u={},s={},l={},c=!1,p=function(e,t,n){return n&&t===u[e]?void 0:u[e]=t};s.isplaying=function(e){var t=document.querySelector("#play-pause-toggle-button.play");return p("isplaying",!!t,e)},s.song=function(e){var t=document.querySelector(".track-history-zone .album-block.current h3");return p("song",t?t.innerText.replace(/\s/g," ").trim():"",e)},s.artist=function(e){var t=document.querySelector(".track-history-zone .album-block.current h4");return p("artist",t?t.innerText.replace(/\s/g," ").trim():"",e)},s.album=function(e){return p("album","",e)},s.albumart=function(e){var t=document.querySelector(".track-history-zone .album-block.current .album-art");return p("albumart",t?t.src.replace(/\/50\./,"/500."):"",e)},s.songvote=function(e){return p("songvote",0,e)},s.volume=function(e){var t=document.querySelector("#volume-bar .ui-slider-range");return p("volume",t?parseFloat(t.style.width)/100:1,e)},s.playlists=function(e){var t=[s.playlist()];return p("playlists",t,e)},s.playlist=function(e){var t=document.querySelector(".station-meta .title");return p("playlist",t?t.innerText:"",e)},s.elapsedtime=function(e){return p("elapsedtime",0,e)},s.totaltime=function(e){return p("totaltime",1,e)},s.moderepeat=function(e){return p("moderepeat",!1,e)},s.modeshuffle=function(e){return p("modeshuffle",!1,e)},s.adwatch=function(e){return p("adwatch",!1,e)},l.play=function(){c=!1,a(document.querySelector("#play-pause-toggle-button.stop"))},l.pause=function(){a(document.querySelector("#play-pause-toggle-button.play"))},l.forcepaused=function(){c=!0,l.pause();var e=function(){c=!1,document.querySelector("#play-pause-toggle-button").removeEventListener("click",e,!0)};document.querySelector("#play-pause-toggle-button").addEventListener("click",e,!0)},l.prev=function(){c=!1},l.next=function(){c=!1},l.songvote=function(){},l.volume=function(e){var t=document.querySelector("#volume-bar"),n=0,o=t;do n+=o.offsetLeft;while(o=o.offsetParent);n+=t.offsetWidth*e,a(t,n,0)},l.seek=function(){},l.playlist=function(){},l.moderepeat=function(){},l.modeshuffle=function(){};var d=function(){console.log("]]connect-radio"),r=chrome.extension.connect({name:JSON.stringify({name:"playerport",type:"radio",isplaying:s.isplaying(),song:s.song(),artist:s.artist(),album:s.album(),albumart:s.albumart(),songvote:s.songvote(),volume:s.volume(),playlists:s.playlists(),playlist:s.playlist(),moderepeat:s.moderepeat(),modeshuffle:s.modeshuffle()})}),r.onMessage.addListener(g),r.onDisconnect.addListener(y),r._postMessage=r.postMessage,r.postMessage=function(){try{r._postMessage.apply(r,arguments)}catch(e){y()}},window.addEventListener("pushstate",v,!0),window.addEventListener("popstate",v,!0),i={},i.playpause=new MutationObserver(function(){void 0!==s.isplaying(!0)&&(c&&u.isplaying?l.forcepaused():r.postMessage({isplaying:u.isplaying}))}),i.playpause.observe(document.querySelector("#play-pause-toggle-button"),{attributes:!0,attributeFilter:["class"]}),i.songinfo=new MutationObserver(function(){var e={};e.song=s.song(!0),e.artist=s.artist(!0),e.album=s.album(!0),e.albumart=s.albumart(!0),e.playlist=s.playlist(!0),e.playlists=s.playlists(!0),e.songvote=s.songvote(!0),r.postMessage(e)}),i.songinfo.observe(document.querySelector(".album-container"),{subtree:!0,characterData:!0,childList:!0}),i.volume=new MutationObserver(function(){void 0!==s.volume(!0)&&r.postMessage({volume:u.volume})}),i.volume.observe(document.querySelector("#volume-bar"),{subtree:!0,attributes:!0,attributeFilter:["style"]})},v=function(){setTimeout(function(){void 0!==s.playlists(!0)&&r.postMessage({playlists:u.playlists})},1e3)},m=function(){var e=window.history.pushState.bind(window.history);window.history.pushState=function(t,n,o){e(t,n,o);var a=document.createEvent("Event");a.initEvent("pushstate",!0,!0,window),window.dispatchEvent(a)}},f=document.createElement("script");f.id="pushstateevent",f.innerText="if(!window.pushstateeventflag)("+m.toString()+")();window.pushstateeventflag=true;document.body.removeChild(document.querySelector('#"+f.id+"'));",document.body.appendChild(f);var y=function(){if(r)try{r.disconnect()}catch(e){}r=null,runningradio=void 0,window.removeEventListener("pushstate",v,!0),window.removeEventListener("popstate",v,!0);for(var t in i)i[t].disconnect();chrome.storage.onChanged.removeListener(o)},g=function(e){"play"==e.action&&l.play(),"pause"==e.action&&l.pause(),"forcepaused"==e.action&&l.forcepaused(),"prev"==e.action&&l.prev(),"next"==e.action&&l.next(),"thumbup"==e.action&&l.songvote(1),"thumbdown"==e.action&&l.songvote(-1),"songvote"==e.action&&l.songvote(e.songvote),"setvolume"==e.action&&l.volume(e.volume),"seek"==e.action&&l.seek(e.seek),"setplaylist"==e.action&&l.playlist(e.playlist),"togglerepeat"==e.action&&l.moderepeat(!s.moderepeat()),"toggleshuffle"==e.action&&l.modeshuffle(!s.modeshuffle())},b=function(){var e=function(){return document.querySelector("#play-pause-toggle-button")?void d():setTimeout(e,500)};setTimeout(e,10)}}()}