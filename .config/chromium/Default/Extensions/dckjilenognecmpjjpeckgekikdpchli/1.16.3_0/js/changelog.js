var local={},sync={};chrome.storage.onChanged.addListener(function(e,s){if("local"==s){for(var o in e)local[o]=e[o].newValue;refresh()}else if("sync"==s){for(var o in e)sync[o]=e[o].newValue;refresh()}}),chrome.storage.local.get(null,function(e){local=e,refresh()}),chrome.storage.sync.get(null,function(e){sync=e,sync.test||(console.log=console.error=function(){}),refresh()});var refresh=function(){sync.clickset&&(local.license.match(/plus$/)?$("body").addClass("plusactive"):$("body").removeClass("plusactive"),local.license.match(/lite$/)?$("body").addClass("liteactive"):$("body").removeClass("liteactive"),(sync.closereview||(new Date).getTime()-local.installed<36e5)&&$(".pleasereview").css({display:"none"}),$("body").css({visibility:"visible"}))};$(function(){$("body").css({visibility:"hidden"}),$(".pleasereview .close").on("click",function(){$(".pleasereview").css({display:"none"}),sync.closereview=!0,chrome.storage.sync.set({closereview:sync.closereview})}),$(".pleasereview .link").on("click",function(){window.open("https://chrome.google.com/webstore/detail/dckjilenognecmpjjpeckgekikdpchli/reviews"),$(".pleasereview").css({display:"none"}),sync.closereview=!0,chrome.storage.sync.set({closereview:sync.closereview})}),$(".newupdate #currentversion").text(chrome.app.getDetails().version),$(".upgradebutton").on("click",function(){chrome.tabs.create({url:"http://soundcontrolplus.com/id/?clid="+local.id+"&fi="+sync.firstinstalled+"&n=/pay/"})}).on("mouseenter",function(){$(".scplus",this).stop().animate({left:".4em"},100)}).on("mouseleave",function(){$(".scplus",this).stop().animate({left:"0"},200)}),$(".issuelinks div").on("click",function(){window.open("https://github.com/SoundControl/Issues/issues/")}),refresh()});